<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
    <!-- 手机头部设置 -->
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <title>放大镜效果</title>
    <!-- 公用的css-->
    <link rel="stylesheet" href="/src/css/main.css" type="text/css">
    <!-- 公用js-->
    <script type="text/javascript" charset="utf-8" src="/src/js/libs/jQuery.js"></script>
    <script type="text/javascript" charset="utf-8" src="/src/js/libs/sea.js"></script>
    <script type="text/javascript" charset="utf-8" src="/src/js/libs/config.js"></script>
</head>

<body style="background-color:#ddd">
    <div class="fn-W1000 fn-BGC-FFF fn-H650" style="padding-top:20px;margin:200px auto;">
        <div class=" fn-H400" style="width:820px;margin:0 auto;border:1px solid #ddd;padding:10px;">
            <div id="outBox" style="position:relative;width:400px;height:400px;">
                <img src="../image/small1.jpg">
                <span id="innerBox" class="fn-PosAbs" style="display:block;height:200px;width:200px;left:0px;top:0px;background:url('../image/bgColor.png') repeat;visibility:hidden;"></span>
	            <div id="BgImageBox" class="fn-W400 fn-H400 fn-PosAbs" style="top:0px;left:420px;overflow:hidden;visibility:hidden;">
	            	<div class="fn-PosRel">
	                	<img id="BgImage" src="../image/bigImage.jpg" style="position:absolute;top:0px;left:0px;">
	            	</div>
	            </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
    var mainObject = {
        init: function(mainParam) {
            var me = this;
            var main = this.m = mainParam ? mainParam : {
                outBox: null /*document.getElementById("#outBox")*/ ,
                innerBox: null /*document.getElementById("#innerBox")*/ ,
                BgImage: null /*document.getElementById("#BgImage")*/ ,
                BgImageBox: null /*document.getElementById("#BgImageBox")*/ ,
                hideBox:null,
                scale: 2
            };
            
            main.outBox.onmouseover = function(e) {
                me.started.call(me, e)
                console.log(1111111111,e.target)
            };
            main.outBox.onmouseout = function(e){
            	console.log(2222222222,e.target)
            	 $(main.outBox).off("onmouseover");
            	 $(me.m.outBox).off("onmousemove");
            	 me.css(me.m.innerBox,{"visibility": "hidden"});
            	 me.css(me.m.BgImageBox,{"visibility": "hidden"});
            }
        },
        started: function(e) {
            var me = this;
            me.m.outBox.onmousemove = function(e) {
                me.move.call(me, e)
            };

        },
        move: function(e) {
            var me = this,
                pageX = e.pageX || (e.clientX + (document.documentElement.scrollLeft || document.body.scrollLeft)),
                pageY = e.pageY || (e.clientY + (document.documentElement.scrollTop || document.body.scrollTop));
        
           //	console.log(me.m.outBox.clientHeight,me.m.innerBox.offsetHeight,me.m.outBox.offsetTop,me.m.innerBox.offsetHeight / 2 )
            me.css(me.m.innerBox, {
                "visibility": "visible",
                // "left": Math.min(
                //     Math.max(
                //         pageX - parseInt(me.m.outBox.offsetLeft + (me.m.innerBox.offsetWidth / 2)), 0),
                //     me.m.outBox.offsetWidth - me.m.innerBox.offsetWidth
                // ) + "px",
                // "top": Math.min(
                //     Math.max(
                //         pageY - parseInt(me.m.outBox.offsetTop + (me.m.innerBox.offsetHeight / 2)), 0),
                //     me.m.outBox.offsetHeight - me.m.innerBox.offsetHeight
                // ) + "px"
            })
            me.css(me.m.BgImageBox,{
            	"visibility":"visible",
            	// "left":
            })
        },
        css: function(element, props) {
        	//console.log(props)
            if (props) {
                for (var i in props) {
                    element.style[i] = props[i];
                };
            };
            return element;
        }
    };
    window.onload = function() {
        mainObject.init({
            outBox: document.getElementById("outBox"),
            innerBox: document.getElementById("innerBox"),
            BgImage: document.getElementById("BgImage"),
            BgImageBox: document.getElementById("BgImageBox")
        })
    }
    </script>
</body>

</html>
